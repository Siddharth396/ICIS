apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: order-snowflake-producer
spec:
  values:
    namespace: order-uat
    snowflake_producer:
      image:
        repository: artifacts.cha.rbxd.ds/automated/ds/order-custom-snowflake-producer # {"$imagepolicy": "flux-system:order-snowflake-producer-uat:name"}
        tag: uat-41-1.9.0 # {"$imagepolicy": "flux-system:order-snowflake-producer-uat:tag"}
        pullPolicy: IfNotPresent
      schedule: '10 10-16 * * 1-5'
      custom_command: python producers/tax_term_cls_producer.py
      topic_reference: silver-tax-term-cls-uat
      env:
        ENVIRONMENT: UAT
        SOURCE_CONTEXT: order_tax_term_cls_producer
        postgres_database: order_uat
        topic_name: refdata_tax_term_cls
        topic_environment: uat
        zone_regency: publishing.hwm_silver_zone
        snowflake_database: ICIS_SILVER_UAT_DB
        snowflake_role: SVC_REF_DATA_PUBLISHER_SILVER_UAT
        snowflake_warehouse: QRY_WH_SILVER_UAT
    vault_secrets:
      name: "order-snowflake-producer-silver-uat-secret"
