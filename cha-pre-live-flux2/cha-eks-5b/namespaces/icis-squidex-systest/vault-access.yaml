apiVersion: v1
kind: ServiceAccount
metadata:
  name: icis-squidex
  namespace: icis-squidex-systest

---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: role-icis-squidex-systest-tokenreview-binding
subjects:
- kind: ServiceAccount
  name: icis-squidex
  namespace: icis-squidex-systest
roleRef:
  kind: ClusterRole
  name: system:auth-delegator
  apiGroup: rbac.authorization.k8s.io

#Added for temporary basis untill vault setup for icis-squidex service account is done
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: darwin-price-tool
  namespace: icis-squidex-systest

---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: role-icis-squidex-dpt-systest-tokenreview-binding
subjects:
- kind: ServiceAccount
  name: darwin-price-tool
  namespace: icis-squidex-systest
roleRef:
  kind: ClusterRole
  name: system:auth-delegator
  apiGroup: rbac.authorization.k8s.io

 #Added svc account for icis-service-emails-cms-iam-role 

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: icis-service-emails
  namespace: icis-squidex-systest
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::512544833523:role/svc-icis-notsys-pre-live-eks-role"

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: role-icis-squidex-svc-emails-systest-tokenreview-binding
subjects:
- kind: ServiceAccount
  name: icis-service-emails
  namespace: icis-squidex-systest
roleRef:
  kind: ClusterRole
  name: system:auth-delegator
  apiGroup: rbac.authorization.k8s.io    
