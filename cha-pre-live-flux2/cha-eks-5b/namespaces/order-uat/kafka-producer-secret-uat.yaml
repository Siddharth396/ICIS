apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultAuth
metadata:
  name: order-kafka-producer-auth
  namespace: order-uat
spec:
  method: kubernetes
  mount: cha/eks-b
  kubernetes:
    role: kv-order-read
    serviceAccount: order
 
---
 
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: order-kafka-producer-vault
  namespace: order-uat
spec:
  vaultAuthRef: order-kafka-producer-auth
  type: kv-v2
  mount: kv/cha/k8s
  path: order/kafka-producer/systest
 
 
  destination:
    name: order-kafka-producer-secret-uat
    create: true
  refreshAfter: 8h